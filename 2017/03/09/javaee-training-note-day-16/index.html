<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1, minimum-scale=1,user-scalable=no,maximum-scale=1"><meta name="format-detection" content="telephone=no"><meta name="format-detection" content="address=no"><title>Jack Q's Blog</title><link rel="stylesheet" href="/blog/css/main.css"></head><body><aside class="jq-blog-aside"><header class="jq-nav-header"><div class="nav-bar-toggle" title="toggle sidebar"><span class="toggle-line-1"></span><span class="toggle-line-2"></span><span class="toggle-line-3"></span></div><div class="nav-bar"><div class="nav-bar-icon"><div class="icon"><svg viewBox="0 0 1000 1000" x="0px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" y="0px">
<polygon points="20,20 250,20 20,250 "/>
<polygon points="325,20 325,400 175,400 175,140 295,20 "/>
<circle cx="249.89" cy="499.769" r="75"/>
<path d="M350,425h150v74.962c0,0,2.72,150.038,150.426,150.038S715,650,715,650v150c0,0,239.892,0-64.574,0 C350.325,800,350,499.962,350,499.962V425z"/>
<circle cx="905" cy="500" r="75"/>
<path d="M605,50v150h75.036c0,0,149.964,2.896,149.964,150.552S830,400,830,400h150c0,0,0,254.915,0-49.448 C980,50.552,680.036,50,680.036,50H605z"/>
<polygon points="738,650 738,800 813,725 "/>
<rect height="100" width="100" x="350" y="300"/>
<path d="M450,403"/>
<rect height="100" width="100" x="477.392" y="50"/>
<rect height="100" width="100" x="411" y="180"/>
<rect height="280" width="150" x="830" y="600"/>
<path d="M175,600h150c0,0,0-120,0,130S75,980,75,980H20V830c0,0-51.286,0,51.857,0S175,730,175,730V600z"/>
<polygon points="980,902 830,902 905,977 "/>
</svg></div><div class="label">Jack Q</div></div></div></header><div class="aside-left"><div class="aside-header"><div class="wrapper"><div class="icon"><svg viewBox="0 0 1000 1000" x="0px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" y="0px">
<polygon points="20,20 250,20 20,250 "/>
<polygon points="325,20 325,400 175,400 175,140 295,20 "/>
<circle cx="249.89" cy="499.769" r="75"/>
<path d="M350,425h150v74.962c0,0,2.72,150.038,150.426,150.038S715,650,715,650v150c0,0,239.892,0-64.574,0 C350.325,800,350,499.962,350,499.962V425z"/>
<circle cx="905" cy="500" r="75"/>
<path d="M605,50v150h75.036c0,0,149.964,2.896,149.964,150.552S830,400,830,400h150c0,0,0,254.915,0-49.448 C980,50.552,680.036,50,680.036,50H605z"/>
<polygon points="738,650 738,800 813,725 "/>
<rect height="100" width="100" x="350" y="300"/>
<path d="M450,403"/>
<rect height="100" width="100" x="477.392" y="50"/>
<rect height="100" width="100" x="411" y="180"/>
<rect height="280" width="150" x="830" y="600"/>
<path d="M175,600h150c0,0,0-120,0,130S75,980,75,980H20V830c0,0-51.286,0,51.857,0S175,730,175,730V600z"/>
<polygon points="980,902 830,902 905,977 "/>
</svg></div><div class="name">Jack Q</div></div></div><div class="aside-center"><div class="icon-header"><div class="icon-item"><a href="/blog/" data-smooth="data-smooth" data-smooth-type="list"><i class="material-icons">home</i><span class="tooltip">home</span></a></div><div class="icon-item"><span data-content="tag"><i class="material-icons">label_outline</i><span class="tooltip">tag</span></span></div><div class="icon-item"><span data-content="category"><i class="material-icons">folder_open</i><span class="tooltip">category</span></span></div><div class="icon-item"><span data-content="archive"><i class="material-icons">date_range</i><span class="tooltip">archive</span></span></div><div class="icon-item toc-header"><span data-content="content"><i class="material-icons">toc</i><span class="tooltip">content</span></span></div></div><div class="aside-center-content"><section class="aside-tag"><ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/java/" data-smooth="data-smooth" data-smooth-type="list">Java</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/blog/" data-smooth="data-smooth" data-smooth-type="list">blog</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/cas/" data-smooth="data-smooth" data-smooth-type="list">cas</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/gulp/" data-smooth="data-smooth" data-smooth-type="list">gulp</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/hexo/" data-smooth="data-smooth" data-smooth-type="list">hexo</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/java/" data-smooth="data-smooth" data-smooth-type="list">java</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/javascript/" data-smooth="data-smooth" data-smooth-type="list">javascript</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/jekyll/" data-smooth="data-smooth" data-smooth-type="list">jekyll</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/linux/" data-smooth="data-smooth" data-smooth-type="list">linux</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/network/" data-smooth="data-smooth" data-smooth-type="list">network</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/react/" data-smooth="data-smooth" data-smooth-type="list">react</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/requirejs/" data-smooth="data-smooth" data-smooth-type="list">requirejs</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/theme/" data-smooth="data-smooth" data-smooth-type="list">theme</a><span class="tag-list-count">1</span></li></ul></section><section class="aside-category"><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/blog/categories/blog/" data-smooth="data-smooth" data-smooth-type="list">blog</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/blog/categories/javascript/" data-smooth="data-smooth" data-smooth-type="list">javascript</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/blog/categories/linux/" data-smooth="data-smooth" data-smooth-type="list">linux</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/blog/categories/network/" data-smooth="data-smooth" data-smooth-type="list">network</a><span class="category-list-count">1</span></li></ul></section><section class="aside-archive"><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2017/03/" data-smooth="data-smooth" data-smooth-type="list"><span>Mar</span><span>2017</span></a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2017/02/" data-smooth="data-smooth" data-smooth-type="list"><span>Feb</span><span>2017</span></a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2017/01/" data-smooth="data-smooth" data-smooth-type="list"><span>Jan</span><span>2017</span></a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2015/09/" data-smooth="data-smooth" data-smooth-type="list"><span>Sep</span><span>2015</span></a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2015/08/" data-smooth="data-smooth" data-smooth-type="list"><span>Aug</span><span>2015</span></a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2015/07/" data-smooth="data-smooth" data-smooth-type="list"><span>Jul</span><span>2015</span></a><span class="archive-list-count">2</span></li></ul></section><section class="aside-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Remote-Package-Sniffer"><span class="toc-text">Remote Package Sniffer</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#port-usage-and-service-status"><span class="toc-text">port usage and service status</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#use-tcpdump-to-sniffer-package"><span class="toc-text">use tcpdump to sniffer package</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#use-tshare-to-dump-package-for-further-analysis"><span class="toc-text">use tshare to dump package for further analysis</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#SQL-keyword-conflict"><span class="toc-text">SQL keyword conflict</span></a></li></ol></section></div></div><div class="aside-bottom"><div class="aside-copy">2017 &copy; Jack Q</div></div></div></aside><section class="page-loader"><div class="loading-animate"></div><div class="error-animate"><i class="material-icons">error</i><div class="message">Network Error...</div></div></section><section class="article-content"><h1>JavaEE Training Note - Day 16</h1><div class="post-meta"><a class="meta-date" href="/blog/archives/2017/03/" data-smooth="data-smooth" data-smooth-type="list">2017-03-09</a><span class="meta-categories"></span><span class="meta-tags"></span></div><div class="post-content"><p>Todayâ€™s topic is about some debugging methods and toolkit used
to solve problems. One is the <code>tcpdump</code> and other terminal 
tools for remote package sniffer and traffic analysis. Another is
some wired errors occured in the development progress of project.</p>
<a id="more"></a>
<h2 id="Remote-Package-Sniffer" class="article-heading">Remote Package Sniffer<a class="article-anchor" href="#Remote-Package-Sniffer" aria-hidden="true"></a></h2><p>For the remote deployed server, the most convenient method  to connect
, monitor and control it is the remote shell. By using the ssh securied 
remote shell connection, the remote server can be accessed just as
a local machine. However, when some error occurred, the terminal tools
is the only choice to solve that.</p>
<p>When debugging the interface of a web service, logging it in-ward and out-word
packages can is a useful approach to seperate the application issues(the server),
network issues(the connection), and the request source issues(the client).
The following tools are used to handle these problems.</p>
<p>The tools are tested on a ubuntu 16.04 server based host.</p>
<h3 id="port-usage-and-service-status" class="article-heading">port usage and service status<a class="article-anchor" href="#port-usage-and-service-status" aria-hidden="true"></a></h3><p>First thing is to ensure the remote application is executing correctly.
The initial step is to print process list and check the target service/application
is running.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ps aux | grep tomcat</div></pre></td></tr></table></figure>
<p>Then make sure the specified remote tcp port is allocated to target program.
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">netstats -ltupn</div><div class="line"><span class="comment"># l: local address (no dns reverse resolving)</span></div><div class="line"><span class="comment"># t: TCP connection</span></div><div class="line"><span class="comment"># u: UDP connection</span></div><div class="line"><span class="comment"># p: port</span></div><div class="line"><span class="comment"># n: numeric representation of port</span></div><div class="line"><span class="comment">#    (no known protocol name replacing)</span></div></pre></td></tr></table></figure></p>
<h3 id="use-tcpdump-to-sniffer-package" class="article-heading">use <code>tcpdump</code> to sniffer package<a class="article-anchor" href="#use-tcpdump-to-sniffer-package" aria-hidden="true"></a></h3><p><code>tcpdump</code> is a network tool to dump the traffic on a network.
For a http protocol based service running on port 80, all of its traffic 
can be dumped by the following setting:
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">sudo tcpdump -q <span class="_">-s</span> 0 -A <span class="string">'tcp port 80'</span></div><div class="line"><span class="comment"># A: pring each package in ASCII mode</span></div><div class="line"><span class="comment"># q: reduce the print of protocol related information</span></div><div class="line"><span class="comment"># s: snarf the package of setted size, 0 to disable this feature</span></div><div class="line"><span class="comment"># 'tcp port 80': package filter to dump package of 80 port on TCP stack</span></div></pre></td></tr></table></figure></p>
<h3 id="use-tshare-to-dump-package-for-further-analysis" class="article-heading">use <code>tshare</code> to dump package for further analysis<a class="article-anchor" href="#use-tshare-to-dump-package-for-further-analysis" aria-hidden="true"></a></h3><p><code>wireshark</code> is an advanced toolkit for network package analysis.
The <code>tshark</code> is the terminal tool in this program packges.
With the <code>tshark</code> program, the package can be used to dump package 
to standard output or save the package to standard <code>pcap</code> (package capture)
format then download the package for further analysis. Besides, 
the package filter can also use <code>lua</code> based scripts to process 
the output or filter.</p>
<h2 id="SQL-keyword-conflict" class="article-heading">SQL keyword conflict<a class="article-anchor" href="#SQL-keyword-conflict" aria-hidden="true"></a></h2><p>In JPA/Hibernate based application, database table can be created by 
the annotated based table declaration. However, when some SQL keyword are 
used in name of the table, the genrate SQL statement will contian 
an unresolvabel structure thus a error will occur. </p>
<p>This will generall print a stacktrace at the start up procedure 
of web application. However, this problem will not prevent the application 
to load in further progress, until a database operation related 
to that table is performed. </p>
</div><div class="post-content-end">END</div><div class="post-prev-next"><div class="post-prev"><a class="post-prev-link" href="/blog/2017/03/08/javaee-training-note-day-15/" data-smooth="data-smooth" data-smooth-type="post">JavaEE Training Note - Day 15</a></div><div class="post-next"><span class="post-next-null"> </span></div></div><div class="post-comment"><div id="disqus_thread">Disqus is loading...</div></div><script id="disqus_config" data-disqus-url="https://jack-q.github.io/blog/2017/03/09/javaee-training-note-day-16/" data-disqus-identifier="20170309-JEENOTE-16" data-disqus-title="JavaEE Training Note - Day 16">var disqus_config = function () {
  var conf = document.getElementById('disqus_config')
  this.page = this.page || {};
  this.page.url = conf.dataset['disqusUrl'];  
  this.page.identifier = conf.dataset['disqusIdentifier'];
  this.page.title = conf.dataset['disqusTitle'];
};</script><script id="disqus_loader">(function() {
  if(document.getElementById('script-disqus')) return;
  var d = document, s = d.createElement('script');
  s.src = '//jackq.disqus.com/embed.js';
  s.id='script-disqus';
  s.setAttribute('data-timestamp', +new Date());
  (d.head || d.body).appendChild(s);
})();</script></section><script>if(!window.ga){
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-63336636-1', 'auto');
  ga('send', 'pageview');
}
</script><script src="/blog/js/jquery.min.js"></script><script src="/blog/js/main.js"></script></body></html>